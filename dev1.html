<!doctype html>

<html>
<head>
  <meta charset="utf-8">

  <title>Live Chat <3</title>

    <style type='text/css'>
    .embeddedServiceHelpButton .helpButton .uiButton {
        background-color: #bb0a30;
        font-family: "Arial", sans-serif;
    }
    .embeddedServiceHelpButton .helpButton .uiButton:focus {
        outline: 1px solid #bb0a30;
    }
</style>

</head>

<body>
	
	
 <h1>DEV 1 CZ</h1>
	
	<label for="language">Please choose your language: </label>
	<select id="myLanguage" name="language" onchange="ChangeLanguage()">
		<option value="en_US">English</option>
		<option value="de_DE">Deutch</option>
		<option value="pl">Polski</option>
		<option value="pt_BR">Português</option>		
	</select>
	
	
	<p>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sodales, arcu non cursus dignissim, ante erat blandit dolor, at sollicitudin magna sem sit amet urna. In tempus risus ut condimentum dapibus. Nam sapien tortor, aliquet sit amet sollicitudin sit amet, luctus vitae sapien. Nunc gravida vel nunc nec ultricies. Pellentesque gravida augue eget venenatis cursus. Donec vel est vel ligula tristique cursus. Sed sit amet malesuada orci. Curabitur commodo iaculis egestas. Ut a felis vitae nulla egestas blandit. Nulla posuere lectus sapien, at condimentum metus feugiat vel. Sed accumsan, nulla nec malesuada iaculis, nulla elit mollis mi, quis pharetra tellus purus ac neque. Nunc viverra lectus eu justo laoreet, eleifend sollicitudin magna maximus.
	</p>

	<p>
		Donec et pharetra magna. Proin fringilla vestibulum urna, sit amet congue ex ornare non. Nulla lectus diam, sollicitudin eu maximus nec, vehicula ac justo. Quisque sollicitudin mollis risus et ornare. Vivamus suscipit pellentesque convallis. Mauris ut imperdiet felis. Proin a gravida quam, ut aliquet tortor. Pellentesque commodo sagittis faucibus.
	</p>

	<p>
		Donec et pharetra magna. Proin fringilla vestibulum urna, sit amet congue ex ornare non. Nulla lectus diam, sollicitudin eu maximus nec, vehicula ac justo. Quisque sollicitudin mollis risus et ornare. Vivamus suscipit pellentesque convallis. Mauris ut imperdiet felis. Proin a gravida quam, ut aliquet tortor. Pellentesque commodo sagittis faucibus.
	</p>
	 




 

<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
		
	var language;
	function ChangeLanguage(){
	 	var selected  = document.getElementById("myLanguage").value;
		console.log('selected: ' , selected);
		this.language = selected;
		console.log('language: ', this.language);
	}	
	
	var languageCodes = new Map();
	    languageCodes.set('en_US','English');
	    languageCodes.set('de_DE','Deutsch');
	    languageCodes.set('pl','Polish');
	    languageCodes.set('pt_BR','Portuguese');
	
	var marketCodes = new Map();
	    marketCodes.set('en_US','GB');
	    marketCodes.set('de_DE','DE');
	    marketCodes.set('pl','PL');
	    marketCodes.set('pt_BR','PT');
	
	
	//new setting - START
	var disabledMinimizedTextMap = new Map();
	    disabledMinimizedTextMap.set('en_US', 'Agent Offline');
	    disabledMinimizedTextMap.set('de_DE', 'Agent Offline');
	    disabledMinimizedTextMap.set('pl', 'Wszyscy agenci są niedostępni');
	
	var defaultMinimizedTextMap = new Map();
	    defaultMinimizedTextMap.set('en_US', 'Chat with an Expert');
	    defaultMinimizedTextMap.set('de_DE', 'Chatten mit einem Experten');
	    defaultMinimizedTextMap.set('pl', 'Porozmawiaj z Ekspertem');
	
	var loadingTextMap = new Map();
	    loadingTextMap.set('en_US','Loading...');
	    loadingTextMap.set('de_DE','Laden...');
	    loadingTextMap.set('pl','Ładowanie...');
	
	//new setting - STOP
	
	console.log('language: ', language); 
	if(language !== "undefined"){
		var initESW = function(gslbBaseURL) {
			embedded_svc.settings.displayHelpButton = true;

			//new setting - START
			embedded_svc.settings.language = this.language; 
			embedded_svc.settings.disabledMinimizedText = disabledMinimizedTextMap.get(this.language);		
			embedded_svc.settings.defaultMinimizedText = defaultMinimizedTextMap.get(this.language);
			embedded_svc.settings.loadingText = loadingTextMap.get(this.language);

			//if(this.language === "de_DE"){return "5731w0000008PAw"};
			embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
				if(this.language === "pl"){return "5735E000000CabB"};
			};

			//new setting - STOP

			embedded_svc.settings.enabledFeatures = ['LiveAgent'];
			embedded_svc.settings.entryFeature = 'LiveAgent';

			embedded_svc.settings.extraPrechatFormDetails = [{
					"label":"Case Language",
					"value" : languageCodes.get(this.language),
					"transcriptFields": ["CaseLanguage__c"]
				},
				{	"label":"Case Market",	       
					"value" : marketCodes.get(this.language),
					"transcriptFields": ["CaseMarket__c"]
			}];

			embedded_svc.settings.extraPrechatInfo = [{
				"entityFieldMaps": [{
					"doCreate": true,
					"doFind": false,
					"fieldName": "LastName",
					"isExactMatch": true,
					"label": "Last Name"
				}, {
					"doCreate": true,
					"doFind": false,
					"fieldName": "FirstName",
					"isExactMatch": true,
					"label": "First Name"
				}, {
					"doCreate": true,
					"doFind": false,
					"fieldName": "Email",
					"isExactMatch": true,
					"label": "Email"
				}],
				"entityName": "Contact",
				"showOnCreate": false
			}];
			
		embedded_svc.init(
		    'https://vwg5-vwgroup--dev1.my.salesforce.com',
		    'https://dev1-vwg5-vwgroup.cs84.force.com/drcwholesale',
		    gslbBaseURL,
		    '00D5E000000DL4w',
		    'AudiEN',
		    {
			baseLiveAgentContentURL: 'https://c.la2-c1cs-fra.salesforceliveagent.com/content',
			deploymentId: '5725E00000000fU',
			buttonId: '5735E000000019F',
			baseLiveAgentURL: 'https://d.la2-c1cs-fra.salesforceliveagent.com/chat',
			eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I5E0000008OlZUAU_172dc801d0e',
			isOfflineSupportEnabled: false
		    }
		);
	    }; 

	    if (!window.embedded_svc) {
		var s = document.createElement('script');
		s.setAttribute('src', 'https://vwg5-vwgroup--dev1.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
		    initESW(null);
		};
		document.body.appendChild(s);
	    } else {
		initESW('https://service.force.com');
	    }
	}
</script>
</body>
</html>
